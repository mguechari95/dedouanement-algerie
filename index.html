<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Calculateur de d√©douanement ‚Äì Alg√©rie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: Arial, sans-serif; background:#f4f6f8; margin:0; padding:20px; }
    .container { max-width:760px; margin:auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,.1); }
    h1 { font-size:22px; margin-bottom:10px; }
    label { display:block; margin-top:15px; font-weight:bold; }
    input, select { width:100%; padding:8px; margin-top:5px; }
    button { margin-top:20px; padding:12px; width:100%; font-size:16px; background:#2563eb; color:white; border:none; border-radius:6px; cursor:pointer; }
    button:hover { background:#1e4ed8; }
    .result { margin-top:20px; padding:15px; background:#f1f5f9; border-radius:6px; font-size:14px; }
    .small { font-size:12px; color:#555; margin-top:10px; }
    .sources { margin-top:20px; font-size:14px; }
    .sources a { color:#2563eb; text-decoration:none; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Calculateur de d√©douanement ‚Äì Alg√©rie</h1>

    <label>Prix d'achat + transport (‚Ç¨)</label>
    <input type="number" id="cif" placeholder="Ex: 10000" />

    <label>Type de v√©hicule</label>
    <select id="type">
      <option value="neuf">Neuf</option>
      <option value="moins3">Moins de 3 ans</option>
    </select>

    <label>Motorisation / Cylindr√©e</label>
    <select id="motorisation">
      <option value="essence_1800">Essence / Hybride ‚â§ 1800 cm¬≥</option>
      <option value="essence_plus">Essence / Hybride > 1800 cm¬≥</option>
      <option value="electrique">√âlectrique</option>
    </select>

    <label>Taux de change officiel (‚Ç¨ ‚Üí DZD) ‚Äì Douane</label>
    <input type="number" id="taux_officiel" placeholder="Ex: 150" />

    <label>Taux du march√© noir (‚Ç¨ ‚Üí DZD) ‚Äì Achat v√©hicule</label>
    <input type="number" id="taux_noir" placeholder="Ex: 230" />

    <button onclick="calculer()">Calculer</button>

    <div class="result" id="result" style="display:none"></div>

    <div class="small">
      ‚ö†Ô∏è Le d√©douanement est calcul√© au taux officiel (Banque d‚ÄôAlg√©rie). Le prix de revient r√©el utilise le taux du march√© parall√®le.
    </div>

    <div class="sources">
      <p>üí± Taux officiel : <a href="https://www.bank-of-algeria.dz/taux-de-change-journalier/" target="_blank">Banque d‚ÄôAlg√©rie</a></p>
      <p>üí± Taux march√© noir (indicatif) : <a href="https://www.algeprix.com/change/euro-dinar" target="_blank">algeprix.com</a></p>
      <p>üìö R√©f√©rence douane : <a href="https://www.douane.gov.dz/" target="_blank">Direction G√©n√©rale des Douanes</a></p>
    </div>
  </div>

<script>
function calculer() {
  const cif = parseFloat(document.getElementById('cif').value);
  const type = document.getElementById('type').value;
  const motorisation = document.getElementById('motorisation').value;
  const tauxOff = parseFloat(document.getElementById('taux_officiel').value);
  const tauxNoir = parseFloat(document.getElementById('taux_noir').value);

  if ([cif, tauxOff, tauxNoir].some(isNaN)) {
    alert('Veuillez remplir tous les champs');
    return;
  }

  let tauxDD = 0;
  if (motorisation === 'essence_1800') tauxDD = 0.15;
  if (motorisation === 'essence_plus') tauxDD = 0.30;
  if (motorisation === 'electrique') tauxDD = 0.05;

  // Calcul sous-composants
  let dd = cif * tauxDD;
  let tva = 0.19 * (cif + dd);
  let tcs = 0.02 * (cif + dd + tva);
  let taxes = dd + tva + tcs;

  let reduction = 1;
  if (type === 'moins3') {
    if (motorisation === 'essence_1800') reduction = 0.5;
    if (motorisation === 'essence_plus') reduction = 0.8;
    if (motorisation === 'electrique') reduction = 0.2;
  }
  let taxesReduites = taxes * reduction;

  const dedouanementDZD = taxesReduites * tauxOff;
  const achatDZD = cif * tauxNoir;
  const totalReviens = dedouanementDZD + achatDZD;

  document.getElementById('result').style.display = 'block';
  document.getElementById('result').innerHTML = `
    <strong>D√©tail du calcul :</strong><br><br>
    ‚Ä¢ Droits de douane (DD) : <b>${dd.toFixed(2)} ‚Ç¨</b><br>
    ‚Ä¢ TVA 19% : <b>${tva.toFixed(2)} ‚Ç¨</b><br>
    ‚Ä¢ TCS 2% : <b>${tcs.toFixed(2)} ‚Ç¨</b><br>
    ‚Ä¢ Total taxes avant r√©duction : <b>${taxes.toFixed(2)} ‚Ç¨</b><br>
    ‚Ä¢ R√©duction < 3 ans : <b>${(100*(1-reduction)).toFixed(0)}%</b><br>
    ‚Ä¢ Total taxes apr√®s r√©duction : <b>${taxesReduites.toFixed(2)} ‚Ç¨</b><br><br>
    üíº D√©douanement (taux officiel) : <b>${dedouanementDZD.toLocaleString()} DZD</b><br>
    üí∏ Achat + transport (march√© noir) : <b>${achatDZD.toLocaleString()} DZD</b><br><br>
    üßæ <strong>Prix de revient total :</strong> <b style="font-size:18px">${totalReviens.toLocaleString()} DZD</b>
  `;
}
</script>
</body>
</html>
